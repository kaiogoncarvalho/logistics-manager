openapi: 3.0.0
info:
    title: API
    description: This API is
    version: 1.0.0
servers:
    - url: http://localhost:8080
      description: Development Server

components:
  securitySchemes:
    oAuth2:    # <---- arbitrary name
      type: oauth2
      description: This API uses OAuth 2 with the password grant flow. [More info](https://api.example.com/docs/auth)
      flows:
        password:   # <---- OAuth flow(authorizationCode, implicit, password or clientCredentials)
          tokenUrl: /v1/oauth/token
          scopes:
            admin: permission admin
            user: permission user

security:
  - oAuth2:
      - admin
      - user

paths:
    /v1/oauth/clients:
      get:
        parameters:
          - $ref: './components/parameters/headers.yaml#/Authorization'
        tags:
          - Oauth
        summary: Get Clients of User
        description: <b>Scopes:</b> admin
        security:
          - oAuth2:
              - admin
        securityDefinitions:
          - oAuth2:
              - admin
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '200':
            description: Clients of User
            content:
              application/json:
                schema:
                  type: array
                  items:
                    $ref: './components/schemas/client.yaml#/schema'
    /v1/oauth/token:
        post:
            parameters:
              - $ref: './components/parameters/headers.yaml#/ContentType'
            requestBody:
              description: Body to authentication.
              required: true
              content:
                application/json:
                  schema:
                    $ref: './components/schemas/token.yaml#/schema'
            tags:
                - Oauth
            summary: Get Token to Authentication.
            responses:
                '500':
                    $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
                '401':
                    $ref: './components/responses/errors/Unauthorized.yaml#/Token'
                '400':
                  $ref: './components/responses/errors/BadRequest.yaml#/Token'
                '200':
                    description: Token Bearer
                    content:
                        application/json:
                            schema:
                               $ref: './components/responses/token.yaml#/Token'
    /v1/user:
      post:
        parameters:
          - $ref: './components/parameters/headers.yaml#/Authorization'
          - $ref: './components/parameters/headers.yaml#/ContentType'
        tags:
          - User
        summary: Create User
        description: <b>Scopes:</b> admin
        requestBody:
          required: true
          content:
            application/json:
              schema:
                $ref: './components/request/user.yaml#/schema'
        security:
          - oAuth2:
              - admin
        securityDefinitions:
          - oAuth2:
              - admin
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '200':
            description: User Information With Client
            content:
              application/json:
                schema:
                  $ref: './components/responses/user.yaml#/schema'
      get:
          parameters:
            - $ref: './components/parameters/headers.yaml#/Authorization'
          tags:
              - User
          summary: Get current user information
          description: <b>Scopes:</b> admin, user
          security:
            - oAuth2:
                - admin
                - user
          securityDefinitions:
            - oAuth2:
                - admin
                - user
          responses:
              '500':
                $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
              '200':
                  description: User Information
                  content:
                      application/json:
                          schema:
                              $ref: './components/schemas/token.yaml#/schema'

    /v1/user/{user_id}:
      get:
        parameters:
          - $ref: './components/parameters/headers.yaml#/Authorization'
          - $ref: './components/parameters/path.yaml#/userId'
        tags:
          - User
        summary: Get user information by ID
        description: <b>Scopes:</b> admin
        security:
          - oAuth2:
              - admin
        securityDefinitions:
          - oAuth2:
              - admin
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '404':
            $ref: './components/responses/errors/NotFound.yaml#/Resource'
          '200':
            description: User Information
            content:
              application/json:
                schema:
                  $ref: './components/schemas/user.yaml#/schema'
    /v1/users:
      get:
        parameters:
          - $ref: './components/parameters/queries.yaml#/page'
          - $ref: './components/parameters/queries.yaml#/perPage'
          - $ref: './components/parameters/headers.yaml#/Authorization'
        tags:
          - User
        summary: Get all Users
        description: <b>Scopes:</b> admin
        security:
          - oAuth2:
              - admin
        securityDefinitions:
          - oAuth2:
              - admin
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '200':
            description: All Users
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    current_page:
                      type: integer
                      example: 1
                      description: Current Page
                    data:
                      type: array
                      items:
                        $ref: './components/schemas/user.yaml#/schema'
                    first_page_url:
                      type: string
                      example: http://localhost:8080/v1/users?page=1
                      description: URL First Page
                    from:
                      type: integer
                      example: 11
                      description: Number of First Register
                    last_page:
                      type: integer
                      example: 3
                      description: Number of Last Page
                    last_page_url:
                      type: string
                      example: http://localhost:8080/v1/users?page=2
                      description: URL Last Page
                    next_page_url:
                      type: string
                      example: http://localhost:8080/v1/users?page=3
                      description: URL Next Page
                    path:
                      type: string
                      example: http://localhost:8080/v1/users
                      description: URL
                    per_page:
                      type: integer
                      example: 10
                      description: Number itens per page
                    prev_page_url:
                      type: integer
                      example: http://localhost:8080/v1/users?page=1
                      description: URL Next Page
                    to:
                      type: integer
                      example: 20
                      description: Number last item of page
                    total:
                      type: integer
                      example: 30
                      description: Total number itens

    /v1/drivers:
      get:
        parameters:
          - $ref: './components/parameters/queries.yaml#/page'
          - $ref: './components/parameters/queries.yaml#/perPage'
          - $ref: './components/parameters/headers.yaml#/Authorization'
        tags:
          - Driver
        summary: Get all Drivers
        description: <b>Scopes:</b> admin, user
        security:
          - oAuth2:
              - admin
              - user
        securityDefinitions:
          - oAuth2:
              - admin
              - user
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '200':
            description: All Drivers
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    current_page:
                      type: integer
                      example: 1
                      description: Current Page
                    data:
                      type: array
                      items:
                        $ref: './components/schemas/driver.yaml#/schema'
                    first_page_url:
                      type: string
                      example: http://localhost:8080/v1/drivers?page=1
                      description: URL First Page
                    from:
                      type: integer
                      example: 11
                      description: Number of First Register
                    last_page:
                      type: integer
                      example: 3
                      description: Number of Last Page
                    last_page_url:
                      type: string
                      example: http://localhost:8080/v1/drivers?page=2
                      description: URL Last Page
                    next_page_url:
                      type: string
                      example: http://localhost:8080/v1/drivers?page=3
                      description: URL Next Page
                    path:
                      type: string
                      example: http://localhost:8080/v1/drivers
                      description: URL
                    per_page:
                      type: integer
                      example: 10
                      description: Number itens per page
                    prev_page_url:
                      type: integer
                      example: http://localhost:8080/v1/drivers?page=1
                      description: URL Next Page
                    to:
                      type: integer
                      example: 20
                      description: Number last item of page
                    total:
                      type: integer
                      example: 30
                      description: Total number itens

    /v1/drivers/deleted:
      get:
        parameters:
          - $ref: './components/parameters/queries.yaml#/page'
          - $ref: './components/parameters/queries.yaml#/perPage'
          - $ref: './components/parameters/headers.yaml#/Authorization'
        tags:
          - Driver
        summary: Get all Drivers Deleted
        description: <b>Scopes:</b> admin
        security:
          - oAuth2:
              - admin
        securityDefinitions:
          - oAuth2:
              - admin
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '200':
            description: All Drivers Deleted
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    current_page:
                      type: integer
                      example: 1
                      description: Current Page
                    data:
                      type: array
                      items:
                        $ref: './components/schemas/driver.yaml#/schema'
                    first_page_url:
                      type: string
                      example: http://localhost:8080/v1/drivers/deleted?page=1
                      description: URL First Page
                    from:
                      type: integer
                      example: 11
                      description: Number of First Register
                    last_page:
                      type: integer
                      example: 3
                      description: Number of Last Page
                    last_page_url:
                      type: string
                      example: http://localhost:8080/v1/drivers/deleted?page=2
                      description: URL Last Page
                    next_page_url:
                      type: string
                      example: http://localhost:8080/v1/drivers/deleted?page=3
                      description: URL Next Page
                    path:
                      type: string
                      example: http://localhost:8080/v1/drivers/deleted
                      description: URL
                    per_page:
                      type: integer
                      example: 10
                      description: Number itens per page
                    prev_page_url:
                      type: integer
                      example: http://localhost:8080/v1/drivers/deleted?page=1
                      description: URL Next Page
                    to:
                      type: integer
                      example: 20
                      description: Number last item of page
                    total:
                      type: integer
                      example: 30
                      description: Total number itens

    /v1/driver/deleted/{driver_id}:
      get:
        parameters:
          - $ref: './components/parameters/headers.yaml#/Authorization'
          - $ref: './components/parameters/path.yaml#/driverId'
        tags:
          - Driver
        summary: Get Driver deleted information by ID
        description: <b>Scopes:</b> admin
        security:
          - oAuth2:
              - admin
        securityDefinitions:
          - oAuth2:
              - admin
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '404':
            $ref: './components/responses/errors/NotFound.yaml#/Resource'
          '200':
            description: Driver Information
            content:
              application/json:
                schema:
                  $ref: './components/schemas/driver.yaml#/schema'

    /v1/driver/{driver_id}:
      get:
        parameters:
          - $ref: './components/parameters/headers.yaml#/Authorization'
          - $ref: './components/parameters/path.yaml#/driverId'
        tags:
          - Driver
        summary: Get Driver information by ID
        description: <b>Scopes:</b> admin, user
        security:
          - oAuth2:
              - admin
              - user
        securityDefinitions:
          - oAuth2:
              - admin
              - user
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '404':
            $ref: './components/responses/errors/NotFound.yaml#/Resource'
          '200':
            description: Driver Information
            content:
              application/json:
                schema:
                  $ref: './components/schemas/driver.yaml#/schema'
      patch:
        parameters:
          - $ref: './components/parameters/headers.yaml#/Authorization'
          - $ref: './components/parameters/path.yaml#/driverId'
        tags:
          - Driver
        summary: Update a Driver
        requestBody:
          required: true
          content:
            application/json:
              schema:
                $ref: './components/request/driver.yaml#/schema'
        description: <b>Scopes:</b> admin, user </br> <b>All fields of body are optional</b>
        security:
          - oAuth2:
              - admin
              - user
        securityDefinitions:
          - oAuth2:
              - admin
              - user
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '404':
            $ref: './components/responses/errors/NotFound.yaml#/Resource'
          '200':
            description: Driver Information
            content:
              application/json:
                schema:
                  $ref: './components/schemas/driver.yaml#/schema'

      delete:
        parameters:
          - $ref: './components/parameters/headers.yaml#/Authorization'
          - $ref: './components/parameters/path.yaml#/driverId'
        tags:
          - Driver
        summary: Delete a Driver
        description: <b>Scopes:</b> admin, user
        security:
          - oAuth2:
              - admin
              - user
        securityDefinitions:
          - oAuth2:
              - admin
              - user
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '404':
            $ref: './components/responses/errors/NotFound.yaml#/Resource'
          '204':
            description: No Content


    /v1/driver:
      post:
        parameters:
          - $ref: './components/parameters/headers.yaml#/Authorization'
        tags:
          - Driver
        summary: Create a Driver
        requestBody:
          required: true
          content:
            application/json:
              schema:
                allOf:
                  - $ref: './components/request/driver.yaml#/schema'
                  - required:
                      - name
                      - cpf
                      - birth_date
                      - gender
                      - cnh
        description: <b>Scopes:</b> admin, user
        security:
          - oAuth2:
              - admin
              - user
        securityDefinitions:
          - oAuth2:
              - admin
              - user
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '404':
            $ref: './components/responses/errors/NotFound.yaml#/Resource'
          '200':
            description: Driver Information
            content:
              application/json:
                schema:
                  $ref: './components/schemas/driver.yaml#/schema'


    /v1/driver/recover/{driver_id}:
      patch:
        parameters:
          - $ref: './components/parameters/headers.yaml#/Authorization'
          - $ref: './components/parameters/path.yaml#/driverId'
        tags:
          - Driver
        summary: Recover a Driver
        description: <b>Scopes:</b> admin
        security:
          - oAuth2:
              - admin
        securityDefinitions:
          - oAuth2:
              - admin
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '404':
            $ref: './components/responses/errors/NotFound.yaml#/Resource'
          '200':
            description: Driver Information
            content:
              application/json:
                schema:
                  $ref: './components/schemas/driver.yaml#/schema'


    /v1/trips:
      get:
        parameters:
          - $ref: './components/parameters/queries.yaml#/page'
          - $ref: './components/parameters/queries.yaml#/perPage'
          - $ref: './components/parameters/headers.yaml#/Authorization'
        tags:
          - Trip
        summary: Get all Trips
        description: <b>Scopes:</b> admin, user
        security:
          - oAuth2:
              - admin
              - user
        securityDefinitions:
          - oAuth2:
              - admin
              - user
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '200':
            description: All Trips
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    current_page:
                      type: integer
                      example: 1
                      description: Current Page
                    data:
                      type: array
                      items:
                        $ref: './components/schemas/trip.yaml#/schema'
                    first_page_url:
                      type: string
                      example: http://localhost:8080/v1/trips?page=1
                      description: URL First Page
                    from:
                      type: integer
                      example: 11
                      description: Number of First Register
                    last_page:
                      type: integer
                      example: 3
                      description: Number of Last Page
                    last_page_url:
                      type: string
                      example: http://localhost:8080/v1/trips?page=2
                      description: URL Last Page
                    next_page_url:
                      type: string
                      example: http://localhost:8080/v1/trips?page=3
                      description: URL Next Page
                    path:
                      type: string
                      example: http://localhost:8080/v1/trips
                      description: URL
                    per_page:
                      type: integer
                      example: 10
                      description: Number itens per page
                    prev_page_url:
                      type: integer
                      example: http://localhost:8080/v1/trips?page=1
                      description: URL Next Page
                    to:
                      type: integer
                      example: 20
                      description: Number last item of page
                    total:
                      type: integer
                      example: 30
                      description: Total number itens

    /v1/trips/deleted:
      get:
        parameters:
          - $ref: './components/parameters/queries.yaml#/page'
          - $ref: './components/parameters/queries.yaml#/perPage'
          - $ref: './components/parameters/headers.yaml#/Authorization'
        tags:
          - Trip
        summary: Get all Trips Deleted
        description: <b>Scopes:</b> admin
        security:
          - oAuth2:
              - admin
        securityDefinitions:
          - oAuth2:
              - admin
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '200':
            description: All Trips Deleted
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    current_page:
                      type: integer
                      example: 1
                      description: Current Page
                    data:
                      type: array
                      items:
                        $ref: './components/schemas/trip.yaml#/schema'
                    first_page_url:
                      type: string
                      example: http://localhost:8080/v1/trips/deleted?page=1
                      description: URL First Page
                    from:
                      type: integer
                      example: 11
                      description: Number of First Register
                    last_page:
                      type: integer
                      example: 3
                      description: Number of Last Page
                    last_page_url:
                      type: string
                      example: http://localhost:8080/v1/trips/deleted?page=2
                      description: URL Last Page
                    next_page_url:
                      type: string
                      example: http://localhost:8080/v1/trips/deleted?page=3
                      description: URL Next Page
                    path:
                      type: string
                      example: http://localhost:8080/v1/trips/deleted
                      description: URL
                    per_page:
                      type: integer
                      example: 10
                      description: Number itens per page
                    prev_page_url:
                      type: integer
                      example: http://localhost:8080/v1/trips/deleted?page=1
                      description: URL Next Page
                    to:
                      type: integer
                      example: 20
                      description: Number last item of page
                    total:
                      type: integer
                      example: 30
                      description: Total number itens

    /v1/trip/deleted/{trip_id}:
      get:
        parameters:
          - $ref: './components/parameters/headers.yaml#/Authorization'
          - $ref: './components/parameters/path.yaml#/tripId'
        tags:
          - Trip
        summary: Get Trip deleted information by ID
        description: <b>Scopes:</b> admin
        security:
          - oAuth2:
              - admin
        securityDefinitions:
          - oAuth2:
              - admin
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '404':
            $ref: './components/responses/errors/NotFound.yaml#/Resource'
          '200':
            description: Driver Information
            content:
              application/json:
                schema:
                  $ref: './components/schemas/trip.yaml#/schema'

    /v1/trip/{trip_id}:
      get:
        parameters:
          - $ref: './components/parameters/headers.yaml#/Authorization'
          - $ref: './components/parameters/path.yaml#/tripId'
        tags:
          - Trip
        summary: Get Trip information by ID
        description: <b>Scopes:</b> admin, user
        security:
          - oAuth2:
              - admin
              - user
        securityDefinitions:
          - oAuth2:
              - admin
              - user
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '404':
            $ref: './components/responses/errors/NotFound.yaml#/Resource'
          '200':
            description: Trip Information
            content:
              application/json:
                schema:
                  $ref: './components/schemas/trip.yaml#/schema'
      patch:
        parameters:
          - $ref: './components/parameters/headers.yaml#/Authorization'
          - $ref: './components/parameters/path.yaml#/tripId'
        tags:
          - Trip
        summary: Update a Trip
        requestBody:
          required: true
          content:
            application/json:
              schema:
                $ref: './components/request/trip.yaml#/schema'
        description: <b>Scopes:</b> admin, user </br> <b>All fields of body are optional</b>
        security:
          - oAuth2:
              - admin
              - user
        securityDefinitions:
          - oAuth2:
              - admin
              - user
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '404':
            $ref: './components/responses/errors/NotFound.yaml#/Resource'
          '200':
            description: Trip Information
            content:
              application/json:
                schema:
                  $ref: './components/schemas/trip.yaml#/schema'

      delete:
        parameters:
          - $ref: './components/parameters/headers.yaml#/Authorization'
          - $ref: './components/parameters/path.yaml#/tripId'
        tags:
          - Trip
        summary: Delete a Trip
        description: <b>Scopes:</b> admin, user
        security:
          - oAuth2:
              - admin
              - user
        securityDefinitions:
          - oAuth2:
              - admin
              - user
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '404':
            $ref: './components/responses/errors/NotFound.yaml#/Resource'
          '204':
            description: No Content


    /v1/trip:
      post:
        parameters:
          - $ref: './components/parameters/headers.yaml#/Authorization'
        tags:
          - Trip
        summary: Create a Trip
        requestBody:
          required: true
          content:
            application/json:
              schema:
                allOf:
                  - $ref: './components/request/trip.yaml#/schema'
                  - required:
                      - driver_id
                      - truck_id
                      - loaded
                      - origin
                      - destiny
        description: <b>Scopes:</b> admin, user
        security:
          - oAuth2:
              - admin
              - user
        securityDefinitions:
          - oAuth2:
              - admin
              - user
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '404':
            $ref: './components/responses/errors/NotFound.yaml#/Resource'
          '200':
            description: Trip Information
            content:
              application/json:
                schema:
                  $ref: './components/schemas/trip.yaml#/schema'


    /v1/trip/recover/{trip_id}:
      patch:
        parameters:
          - $ref: './components/parameters/headers.yaml#/Authorization'
          - $ref: './components/parameters/path.yaml#/tripId'
        tags:
          - Trip
        summary: Recover a Trip
        description: <b>Scopes:</b> admin
        security:
          - oAuth2:
              - admin
        securityDefinitions:
          - oAuth2:
              - admin
        responses:
          '500':
            $ref: './components/responses/errors/InternalServerError.yaml#/InternalServerError'
          '404':
            $ref: './components/responses/errors/NotFound.yaml#/Resource'
          '200':
            description: Trip Information
            content:
              application/json:
                schema:
                  $ref: './components/schemas/trip.yaml#/schema'



